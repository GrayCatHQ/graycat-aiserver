<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>RPG Generator | Velesio AI Server</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="RPG Generator" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduction The RPG Character Generator Unity asset fully utilizes every feature of the Velesio AIServer and is the optimal way to utilize it. Currently the Generator has one scene which features a RPG Character generator that allows playes to generate and talk to DND characters in various scenarios. It is a combination of two open source projects, Undream LLM for unity and dobrado76’s Stable Diffusion Integration for unity to create a comprehensive tool for AI generated content, both for development and runtime." />
<meta property="og:description" content="Introduction The RPG Character Generator Unity asset fully utilizes every feature of the Velesio AIServer and is the optimal way to utilize it. Currently the Generator has one scene which features a RPG Character generator that allows playes to generate and talk to DND characters in various scenarios. It is a combination of two open source projects, Undream LLM for unity and dobrado76’s Stable Diffusion Integration for unity to create a comprehensive tool for AI generated content, both for development and runtime." />
<link rel="canonical" href="http://0.0.0.0:4000/velesio-aiserver/unity-integrations/dnd-generator/" />
<meta property="og:url" content="http://0.0.0.0:4000/velesio-aiserver/unity-integrations/dnd-generator/" />
<meta property="og:site_name" content="Velesio AI Server" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-09-23T22:27:21+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="RPG Generator" />
<meta name="twitter:site" content="@Velesio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-09-23T22:27:21+02:00","datePublished":"2025-09-23T22:27:21+02:00","description":"Introduction The RPG Character Generator Unity asset fully utilizes every feature of the Velesio AIServer and is the optimal way to utilize it. Currently the Generator has one scene which features a RPG Character generator that allows playes to generate and talk to DND characters in various scenarios. It is a combination of two open source projects, Undream LLM for unity and dobrado76’s Stable Diffusion Integration for unity to create a comprehensive tool for AI generated content, both for development and runtime.","headline":"RPG Generator","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/velesio-aiserver/unity-integrations/dnd-generator/"},"url":"http://0.0.0.0:4000/velesio-aiserver/unity-integrations/dnd-generator/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/velesio-aiserver/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/velesio-aiserver/feed.xml" title="Velesio AI Server" /></head>
<body><header class="site-header" role="banner">
  <div class="header-wrapper">
    <a class="site-title" rel="author" href="/velesio-aiserver/">
      <span class="site-logo">🚀</span>
      Velesio AI Server
    </a>

    <div class="header-actions">
      <!-- Theme toggle -->
      <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
        <svg class="theme-icon sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4V2c0-.6-.4-1-1-1s-1 .4-1 1v2c0 .6.4 1 1 1s1-.4 1-1zM12 22v-2c0-.6-.4-1-1-1s-1 .4-1 1v2c0 .6.4 1 1 1s1-.4 1-1zM20 13h2c.6 0 1-.4 1-1s-.4-1-1-1h-2c-.6 0-1 .4-1 1s.4 1 1 1zM4 13H2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1z"/>
        </svg>
        <svg class="theme-icon moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
          <path d="M21 12.8c-.2 4.9-4.3 8.8-9.2 8.6C6.8 21.2 2.8 17.1 3 12.2 3.2 7.3 7.3 3.4 12.2 3.6c.5 0 1 .1 1.4.2-.4.4-.7.9-1 1.4-.9 1.6-.9 3.5 0 5.1.4.8 1 1.4 1.8 1.8 1.6.9 3.5.9 5.1 0 .5-.3 1-.6 1.4-1 .1.5.1.9.1 1.4z"/>
        </svg>
      </button>

      <!-- GitHub link -->
      <a class="github-link" href="https://github.com/Velesio/Velesio-aiserver" target="_blank" rel="noopener" aria-label="View on GitHub">
        <svg class="github-icon" width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
        </svg>
      </a>

      <!-- Mobile menu toggle -->
      <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>
</header>

<style>
.site-header {
  background-color: var(--header-bg);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 1000;
  backdrop-filter: blur(8px);
}

.site-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text-color);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.site-logo {
  font-size: 1.2rem;
}

.site-nav {
  .page-link {
    color: var(--text-secondary);
    text-decoration: none;
    margin-left: 1.5rem;
    font-weight: 500;
    transition: color 0.2s ease;
    
    &:hover {
      color: var(--text-color);
    }
    
    &.github-link {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      
      .github-icon {
        fill: currentColor;
      }
    }
  }
  
  .nav-trigger {
    display: none;
  }
  
  .menu-icon {
    display: none;
  }
  
  .trigger {
    display: flex;
    align-items: center;
  }
}

@media screen and (max-width: 600px) {
  .site-nav {
    position: absolute;
    top: 9px;
    right: 15px;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    text-align: right;
    
    label[for="nav-trigger"] {
      display: block;
      float: right;
      width: 36px;
      height: 36px;
      z-index: 2;
      cursor: pointer;
    }
    
    .menu-icon {
      display: block;
      float: right;
      width: 36px;
      height: 26px;
      line-height: 0;
      padding-top: 10px;
      text-align: center;
      
      > svg {
        fill: var(--text-color);
      }
    }
    
    input ~ .trigger {
      clear: both;
      display: none;
      flex-direction: column;
      align-items: flex-start;
      padding: 10px;
    }
    
    input:checked ~ .trigger {
      display: flex;
    }
    
    .page-link {
      display: block;
      padding: 5px 10px;
      margin-left: 0;
      margin-bottom: 5px;
      
      &:last-child {
        margin-bottom: 0;
      }
    }
  }
}
</style><main class="page-content" aria-label="Content">
      <div class="page-layout"><nav class="sidebar" id="sidebar">
  <div class="sidebar-content">
    <ul class="sidebar-nav">
      
      
      <li class="nav-item">
        <a href="/velesio-aiserver/" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
          </svg>
          Home
        </a>
      </li>

      <li class="nav-item">
        <a href="/velesio-aiserver/getting-started.html" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
          </svg>
          Getting Started
        </a>
      </li>

      <li class="nav-item">
        <a href="/velesio-aiserver/deployment.html" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 7h-3V6a4 4 0 0 0-8 0v1H5a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM10 6a2 2 0 0 1 4 0v1h-4V6zm6 16H8a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h2v1a1 1 0 0 0 2 0V9h2v12a1 1 0 0 1-1 1z"/>
          </svg>
          Deployment
        </a>
      </li>

      <li class="nav-item">
        <a href="/velesio-aiserver/architecture.html" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          Architecture
        </a>
      </li>

      <li class="nav-item">
        <a href="/velesio-aiserver/api-reference.html" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
          </svg>
          API Reference
        </a>
      </li>

      <li class="nav-item">
        <a href="/velesio-aiserver/model-templates.html" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M4 4h16v2H4V4zm0 6h10v2H4v-2zm0 6h16v2H4v-2z"/>
          </svg>
          Model Templates
        </a>
      </li>

      <li class="nav-item">
        <a href="/velesio-aiserver/troubleshooting.html" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
          </svg>
          Troubleshooting
        </a>
      </li>
      
      <li class="nav-section">
        <span class="section-title">Components</span>
      </li>
      
      <li class="nav-item">
        <a href="/velesio-aiserver/components/api-service/" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
          API Service
        </a>
      </li>
      
      <li class="nav-item">
        <a href="/velesio-aiserver/components/gpu-workers/" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"/>
          </svg>
          GPU Workers
        </a>
      </li>
      
      <li class="nav-item">
        <a href="/velesio-aiserver/components/monitoring/" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5 7h-13v-2h13v2z"/>
            <path d="M11 2v2H7V2h4zm0 20v-2H7v2h4zm2-20v2h4V2h-4zm0 20v-2h4v2h-4z"/>
          </svg>
          Monitoring Stack
        </a>
      </li>
      
      <li class="nav-section">
        <span class="section-title">Unity Integrations</span>
      </li>
      
      <li class="nav-item">
        <a href="/velesio-aiserver/unity-integrations/llm-integration/" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 6h-1v8c0 .55-.45 1-1 1H6v1c0 1.1.9 2 2 2h10l4 4V8c0-1.1-.9-2-2-2zm-3 5V4c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v13l4-4h11c1.1 0 2-.9 2-2z"/>
          </svg>
          LLM for Unity Integration
        </a>
      </li>
      
      <li class="nav-item">
        <a href="/velesio-aiserver/unity-integrations/stable-diffusion-integration/" class="nav-link ">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 17l3.5-4.5 2.5 3.01L14.5 11l4.5 6H5z"/>
          </svg>
          Stable Diffusion for Unity
        </a>
      </li>
      
      <li class="nav-item">
        <a href="/velesio-aiserver/unity-integrations/dnd-generator/" class="nav-link active">
          <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          DND Generator
        </a>
      </li>
    </ul>
  </div>
</nav>

<!-- Sidebar overlay for mobile -->
<div class="sidebar-overlay" id="sidebar-overlay"></div><div class="main-content">
    <div class="wrapper">
      <article class="post">
        <header class="post-header">
          <h1 class="post-title">RPG Generator</h1></header>

        <div class="post-content">
          <h2 id="introduction">Introduction</h2>
<p>The RPG Character Generator Unity asset fully utilizes every feature of the Velesio AIServer and is the optimal way to utilize it. Currently the Generator has one scene which features a RPG Character generator that allows playes to generate and talk to DND characters in various scenarios. It is a combination of two open source projects, Undream LLM for unity and dobrado76’s Stable Diffusion Integration for unity to create a comprehensive tool for AI generated content, both for development and runtime.</p>

<p>The AI models stack is used to generate all of the content showcased in the asset’s marketing material.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nv">MODEL_URL</span><span class="o">=</span>https://huggingface.co/DavidAU/Llama-3.-8X3B-MOE-Dark-Champion-Instruct-uncensored-abliterated-18.4B-GGUF/resolve/main/L3.2-8X3B-MOE-Dark-Champion-Inst-18.4B-uncen-ablit_D_AU-Q3_k_s.gguf
<span class="nv">SD_MODEL_URL</span><span class="o">=</span>https://civitai.com/api/download/models/128713?type<span class="o">=</span>Model&amp;format<span class="o">=</span>SafeTensor&amp;size<span class="o">=</span>pruned&amp;fp<span class="o">=</span>fp16
<span class="nv">LORA_URL</span><span class="o">=</span>https://civitai.com/api/download/models/1569286?type<span class="o">=</span>Model&amp;format<span class="o">=</span>SafeTensor
<span class="nv">VAE_URL</span><span class="o">=</span>https://huggingface.co/stabilityai/sd-vae-ft-mse-original/resolve/main/vae-ft-mse-840000-ema-pruned.safetensors
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This model stack is focused around the <a href="https://civitai.com/models/1360012/dnd-character-maker-classes-and-races-concept">DND Character Maker Lora</a> and the goal is to create portraits of characters in various contexts with which the player can chat with. All of the dropdown menu options are created to narrow down the options to specific lora keywords.</p>

<p>For more detailed documentation on the LLM for Unity and SD Integration, on which this asset is built on, you can consult their respective documentations.</p>

<h2 id="character-generator-scene">Character Generator Scene</h2>

<p>This is the primary scene of the Asset. The player fill out various characteristics of a character, or leaves them to be random, a prompt is then made to llamacpp and stabledifussion to generate a background and portrait of the character. The player can then chat with the character with a set context.</p>

<p>The primary configuration game object is the VelesioAI Integration game object, it contains the configurations for the llamacpp and stable diffusion connections as well as the scene itself.</p>

<p>SCREENSHOT</p>

<p>You can also utilize a local LLM through the disabled LLM object and unflicking Remote in the main configuration object.</p>

<hr />

<h2 id="scripts-documentation">Scripts documentation</h2>

<h3 id="characterconfiguratorcs"><code class="language-plaintext highlighter-rouge">CharacterConfigurator.cs</code></h3>

<p><strong>Purpose:</strong></p>

<p>This script acts as the bridge between the user interface for character creation and the backend generation logic. It collects all user-defined parameters from input fields and dropdowns and passes them to the <code class="language-plaintext highlighter-rouge">PromptButton</code> script to initiate the character generation process.</p>

<p><strong>Key Components:</strong></p>
<ul>
  <li><strong>UI Elements:</strong> A collection of <code class="language-plaintext highlighter-rouge">TMP_InputField</code>, <code class="language-plaintext highlighter-rouge">TMP_Dropdown</code>, and <code class="language-plaintext highlighter-rouge">Toggle</code> elements that capture user preferences for the character’s name, race, class, universe, alignment, level, context, and portrait description.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">startGenerationButton</code>:</strong> The <code class="language-plaintext highlighter-rouge">Button</code> that triggers the character generation.</li>
  <li><strong>Dependencies:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">promptButtonScript</code>: A required reference to the <code class="language-plaintext highlighter-rouge">PromptButton</code> script, which it calls to start the generation.</li>
      <li><code class="language-plaintext highlighter-rouge">sceneManager</code>: A required reference to the <code class="language-plaintext highlighter-rouge">SceneManager</code> to control UI panel transitions.</li>
    </ul>
  </li>
</ul>

<p><strong>Core Methods:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">TriggerGeneration()</code>: Gathers all data from the UI inputs, determines if any values need to be randomized, and calls <code class="language-plaintext highlighter-rouge">promptButtonScript.StartCharacterGeneration()</code> with the final parameters. It also instructs the <code class="language-plaintext highlighter-rouge">SceneManager</code> to switch to the background/results view.</li>
  <li><code class="language-plaintext highlighter-rouge">ShowConfiguration()</code>: Resets all UI fields to their default state and tells the <code class="language-plaintext highlighter-rouge">SceneManager</code> to return to the configuration view.</li>
  <li><code class="language-plaintext highlighter-rouge">ShowLoadingIndicator()</code> / <code class="language-plaintext highlighter-rouge">HideLoadingIndicator()</code>: These methods are called by <code class="language-plaintext highlighter-rouge">PromptButton</code> to toggle the loading animation via the <code class="language-plaintext highlighter-rouge">SceneManager</code>.</li>
</ul>

<hr />

<h3 id="promptbuttoncs"><code class="language-plaintext highlighter-rouge">PromptButton.cs</code></h3>

<p><strong>Purpose:</strong></p>

<p>This is the central script for the character generation logic. It constructs a detailed prompt for the LLM based on the template and user-provided constraints. After receiving the character description from the LLM, it parses the response and, if enabled, constructs a new prompt to generate a character portrait using the Stable Diffusion script.</p>

<p><strong>Key Components:</strong></p>
<ul>
  <li><strong>LLM Components:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">llmCharacter</code>: The <code class="language-plaintext highlighter-rouge">LLMCharacter</code> component used to generate the character’s text description.</li>
      <li><code class="language-plaintext highlighter-rouge">sdImageGenerator</code>: The <code class="language-plaintext highlighter-rouge">StableDiffusionText2Image</code> component used for generating the portrait.</li>
    </ul>
  </li>
  <li><strong>UI Elements:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">responseText</code>: A <code class="language-plaintext highlighter-rouge">Text</code> element to display the generated character sheet.</li>
      <li><code class="language-plaintext highlighter-rouge">characterPortraitImage</code>: A <code class="language-plaintext highlighter-rouge">RawImage</code> to display the generated character portrait.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">characterPrompt</code>:</strong> A <code class="language-plaintext highlighter-rouge">TextArea</code> string that serves as the base template for the LLM.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">portraitStylePrefix</code> / <code class="language-plaintext highlighter-rouge">negativePrompt</code>:</strong> Strings used to refine the prompt sent to the image generator for better results.</li>
  <li><strong>Dependencies:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">chatInterface</code> (<code class="language-plaintext highlighter-rouge">DemoScript</code>): Used to pass the final character context to the chat system.</li>
      <li><code class="language-plaintext highlighter-rouge">characterConfigurator</code>: Used to show/hide the loading indicator.</li>
      <li><code class="language-plaintext highlighter-rouge">sceneManager</code>: Used to update the “Current Situation” text on the background panel.</li>
    </ul>
  </li>
</ul>

<p><strong>Core Methods:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">StartCharacterGeneration(...)</code>: The main entry point. It builds the final text prompt, awaits the response from the <code class="language-plaintext highlighter-rouge">llmCharacter</code>, parses the result, and then triggers the <code class="language-plaintext highlighter-rouge">sdImageGenerator</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">BuildComprehensiveImagePrompt(...)</code>: Creates a detailed prompt for the image generator by combining the <code class="language-plaintext highlighter-rouge">portraitStylePrefix</code> with key details extracted from the generated character description.</li>
  <li><code class="language-plaintext highlighter-rouge">DisplayCharacterPortrait(Texture2D portraitTexture)</code>: A callback method that is executed when the <code class="language-plaintext highlighter-rouge">sdImageGenerator</code> finishes. It applies the received <code class="language-plaintext highlighter-rouge">Texture2D</code> to the <code class="language-plaintext highlighter-rouge">characterPortraitImage</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">CancelRequest()</code>: Stops any ongoing LLM or Stable Diffusion requests and resets the UI.</li>
</ul>

<hr />

<h3 id="dndcharactercs-component-demoscript"><code class="language-plaintext highlighter-rouge">DNDCharacter.cs</code> (Component: <code class="language-plaintext highlighter-rouge">DemoScript</code>)</h3>

<p><strong>Purpose:</strong></p>

<p>This script manages the interactive chat functionality. Once a character is generated, this script takes over to facilitate a role-playing conversation. It uses the generated character’s information, universe, and situation to maintain context in its conversation with the player.</p>

<p><strong>Key Components:</strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">llmCharacter</code>:</strong> The <code class="language-plaintext highlighter-rouge">LLMCharacter</code> component used to generate in-character chat responses.</li>
  <li><strong>UI Elements:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">playerText</code>: An <code class="language-plaintext highlighter-rouge">InputField</code> for the user to type messages.</li>
      <li><code class="language-plaintext highlighter-rouge">AIText</code>: A <code class="language-plaintext highlighter-rouge">TextMeshProUGUI</code> element to display the conversation log.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">systemPrompt</code>:</strong> A string that instructs the LLM to respond in character based on the provided context.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">chatHistory</code>:</strong> A <code class="language-plaintext highlighter-rouge">List&lt;string&gt;</code> that stores the conversation, which is used to update the chat display.</li>
</ul>

<p><strong>Core Methods:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">SetCharacterContext(string characterInfo, string universe, string context)</code>: Called by <code class="language-plaintext highlighter-rouge">PromptButton</code> after generation is complete. It initializes the chat by providing the script with the character’s details, universe, and current situation. It also triggers an initial in-character remark from the LLM.</li>
  <li><code class="language-plaintext highlighter-rouge">onInputFieldSubmit(string message)</code>: Triggered when the player sends a message. It constructs a new prompt including the system prompt, character context, and the player’s message, then sends it to the <code class="language-plaintext highlighter-rouge">llmCharacter</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">SetAIText(string text)</code>: A callback for the <code class="language-plaintext highlighter-rouge">llmCharacter.Chat</code> call that updates the AI’s response in the chat window as it’s being streamed.</li>
</ul>

<hr />

<h3 id="scenemanagercs"><code class="language-plaintext highlighter-rouge">SceneManager.cs</code></h3>

<p><strong>Purpose:</strong></p>

<p>This script acts as a simple state machine for the UI. It manages which panels (Configuration, Background, Chat) are active, ensuring that the user only sees the relevant interface for the current state of the application.</p>

<p><strong>Key Components:</strong></p>
<ul>
  <li><strong>UI Panels:</strong> <code class="language-plaintext highlighter-rouge">GameObject</code> references to the different panels that make up the UI (<code class="language-plaintext highlighter-rouge">configurationPanel</code>, <code class="language-plaintext highlighter-rouge">backgroundPanel</code>, <code class="language-plaintext highlighter-rouge">chatPanel</code>, <code class="language-plaintext highlighter-rouge">loadingIndicator</code>).</li>
  <li><strong>Navigation Buttons:</strong> <code class="language-plaintext highlighter-rouge">Button</code> references for navigating between the “Background” and “Chat” views.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">SceneState</code> Enum:</strong> An enum (<code class="language-plaintext highlighter-rouge">Configuration</code>, <code class="language-plaintext highlighter-rouge">Background</code>, <code class="language-plaintext highlighter-rouge">Chat</code>) to define the possible UI states.</li>
</ul>

<p><strong>Core Methods:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">SwitchToScene(SceneState newState)</code>: The primary method for changing the application’s state. It deactivates all panels and then activates only the ones required for the <code class="language-plaintext highlighter-rouge">newState</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">ShowLoadingIndicator(bool show)</code>: Toggles the visibility of the <code class="language-plaintext highlighter-rouge">loadingIndicator</code> GameObject.</li>
  <li><code class="language-plaintext highlighter-rouge">UpdateCurrentSituation(string situationText)</code>: Updates a <code class="language-plaintext highlighter-rouge">Text</code> element on the background panel to display the character’s current context.</li>
  <li><code class="language-plaintext highlighter-rouge">ResetToConfiguration()</code>: A public method to easily return the application to its initial configuration state.</li>
</ul>

<hr />

<h3 id="simplescenecs-component-simplellmprompt"><code class="language-plaintext highlighter-rouge">SimpleScene.cs</code> (Component: <code class="language-plaintext highlighter-rouge">SimpleLLMPrompt</code>)</h3>

<p><strong>Purpose:</strong></p>

<p>This script provides a minimal, self-contained example of how to use the <code class="language-plaintext highlighter-rouge">LLMCharacter</code> component. It is not used in the main D&amp;D character generator scene but is included as a basic demonstration of sending a prompt to an LLM and receiving a streaming response.</p>

<p><strong>Key Components:</strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">llmCharacter</code>:</strong> The <code class="language-plaintext highlighter-rouge">LLMCharacter</code> component to interact with.</li>
  <li><strong>UI Elements:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">promptInput</code>: A <code class="language-plaintext highlighter-rouge">TMP_InputField</code> for user input.</li>
      <li><code class="language-plaintext highlighter-rouge">responseText</code>: A <code class="language-plaintext highlighter-rouge">TextMeshProUGUI</code> to display the LLM’s response.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">systemPrompt</code>:</strong> A basic instruction for the AI assistant.</li>
</ul>

<p><strong>Core Methods:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">OnSubmitPrompt()</code>: Called when the user submits text. It sends the input to the <code class="language-plaintext highlighter-rouge">llmCharacter.Chat</code> method.</li>
  <li><code class="language-plaintext highlighter-rouge">OnResponseUpdate(string partialResponse)</code>: A callback that updates the <code class="language-plaintext highlighter-rouge">responseText</code> with the streaming output from the LLM.</li>
  <li><code class="language-plaintext highlighter-rouge">OnResponseComplete()</code>: A callback executed when the full response has been received.</li>
</ul>

        </div>

        
          <nav class="post-nav">
            
            
            
            
            
            <div class="nav-previous">
              
                
                <a href="/velesio-aiserver/getting-started.html" rel="prev">← Getting Started</a>
              
            </div>
            
            <div class="nav-next">
              
                
                <a href="/velesio-aiserver/components.html" rel="next">Components →</a>
              
            </div>
          </nav>
        

        <!-- Back to top button -->
        <button class="back-to-top" id="back-to-top" aria-label="Back to top">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
          </svg>
        </button>
      </article>
    </div>
  </div>
</div>

<script>
// Set dark theme as default immediately
(function() {
  const savedTheme = localStorage.getItem('theme');
  const theme = savedTheme || 'dark'; // Default to dark
  document.documentElement.setAttribute('data-theme', theme);
  if (!savedTheme) {
    localStorage.setItem('theme', 'dark');
  }
})();
</script>
<script src="/velesio-aiserver/assets/js/main.js"></script>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/velesio-aiserver/"></data>

  <div class="wrapper">
    <div class="footer-content">
      <div class="footer-section">
        <h3 class="footer-heading">Velesio AI Server</h3>
        <p class="footer-description">A microservice-based AI inference server with Redis queue-based worker architecture</p>
        
        <div class="social-links">
          <a href="https://github.com/Velesio/Velesio-aiserver" class="social-link" target="_blank" rel="noopener">
            <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
            </svg>
            GitHub
          </a>
          
          
        </div>
      </div>
      
      <div class="footer-section">
        <h4>Documentation</h4>
        <ul class="footer-links">
          <li><a href="/velesio-aiserver/getting-started">Getting Started</a></li>
          <li><a href="/velesio-aiserver/architecture">Architecture</a></li>
          <li><a href="/velesio-aiserver/components">Components</a></li>
          <li><a href="/velesio-aiserver/api-reference">API Reference</a></li>
          <li><a href="/velesio-aiserver/deployment">Deployment</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h4>Resources</h4>
        <ul class="footer-links">
          <li><a href="/velesio-aiserver/troubleshooting">Troubleshooting</a></li>
          <li><a href="https://github.com/Velesio/Velesio-aiserver/issues" target="_blank">Report Issues</a></li>
          <li><a href="https://github.com/Velesio/Velesio-aiserver/discussions" target="_blank">Discussions</a></li>
          <li><a href="https://github.com/Velesio/Velesio-aiserver/releases" target="_blank">Releases</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h4>Built with</h4>
        <div class="tech-stack">
          <span class="tech-badge">FastAPI</span>
          <span class="tech-badge">Docker</span>
          <span class="tech-badge">Redis</span>
          <span class="tech-badge">CUDA</span>
          <span class="tech-badge">Jekyll</span>
        </div>
        
        <div class="footer-meta">
          <p>&copy; 2025 Velesio AI Server. Open source under MIT license.</p>
          <p class="build-info">
            Built with ❤️ using Jekyll
            <br>
            <small>Last updated: September 23, 2025</small>
          </p>
        </div>
      </div>
    </div>
  </div>
</footer><script src="/velesio-aiserver/assets/js/toc.js"></script>
  </body>

</html>